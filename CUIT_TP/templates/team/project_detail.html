{% extends 'iframe_base.html' %}

{% block content %}
    <div class="container" style="padding-top: 20px;padding-bottom: 20px;">
    <div class="row" style="margin-top: 20px;">
    <div class="col-12">
        <h1 style="text-align: center">{{ project.project_name }}</h1>
    </div>
    <div class="col-12">
        <table id="bootstrap-data-table" class="table table-striped table-bordered">
            <thead>
            <tr>
                <th scope="col">需求</th>
                <th scope="col">执行者</th>
                <th scope="col">优先级</th>
                <th scope="col">状态</th>
            </tr>
            </thead>
            <tbody>
            {% for bug in project.bugs %}
                <tr>
                    <td style="vertical-align: middle;">
                        <a href="#">
                            {{ bug.bug_name }}
                        </a>
                    </td>
                    <td style="vertical-align: middle;">{{ bug.executor.username }}</td>
                    <td style="vertical-align: middle;">{{ bug.execute_datetime }}</td>
                    <td style="vertical-align: middle;">{{ bug.status }}&nbsp;
                        <button class="btn btn-light"
                                onclick="window.location.href='{{ url_for("team.change_bug", bug_id=bug.id) }}'">
                            修改
                        </button>
                        &nbsp;
                        <button class="btn btn-light">删除</button>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <div class="dataTables_paginate paging_simple_numbers" id="bootstrap-data-table_paginate"
             style="margin-bottom: 10px;">
            <ul class="pagination justify-content-center">

                {% if tasks.has_prev %}
                    <li class="paginate_button page-item previous"
                        id="bootstrap-data-table_previous">
                        <a class="page-link" href="{{ url_for('lab.task', page=tasks.prev_num) }}"
                           aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                {% else %}
                    <li class="paginate_button page-item previous disabled"
                        id="bootstrap-data-table_previous">
                        <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                {% endif %}
                {% for page in tasks.iter_pages(1,1,3,1) %}
                    {% if page %}
                        <li class="paginate_button page-item {% if page == tasks.page %}active{% endif %}"
                            id="bootstrap-data-table_previous">
                            <a class="page-link" href="{{ url_for('lab.task', page=page) }}"
                               aria-label="Previous">
                                <span aria-hidden="true">{{ page }}</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="paginate_button page-item disabled"
                            id="bootstrap-data-table_previous">
                            <a class="page-link" href="{{ url_for('lab.task', page=page) }}"
                               aria-label="Previous">
                                <span aria-hidden="true">&hellip;</span>
                            </a>
                        </li>
                    {% endif %}
                {% endfor %}
                {% if tasks.has_next %}
                    <li class="paginate_button page-item next">
                        <a class="page-link" href="{{ url_for('lab.task', page=tasks.next_num) }}"
                           aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% else %}
                    <li class="paginate_button page-item next disabled">
                        <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
            <div class="row justify-content-center"
                 style="width: inherit;margin-left: 0;margin-right: 0;margin-bottom: 10px;">
                <button class="btn btn-light float-right"
                        onclick="window.location.href='{{ url_for("team.create_bug", project_id=project.id) }}'">
                    新增缺陷
                </button>
            </div>
        </div>
        <div class="col-12">
            <table id="bootstrap-data-table" class="table table-striped table-bordered">
                <thead>
                <tr>
                    <th scope="col">缺陷</th>
                    <th scope="col">执行者</th>
                    <th scope="col">优先级</th>
                    <th scope="col">状态</th>
                </tr>
                </thead>
                <tbody>
                {% for backlog in project.backlogs %}
                    <tr>
                        <td style="vertical-align: middle;">
                            <a href="#">
                                {{ backlog.backlog_name }}
                            </a>
                        </td>
                        <td style="vertical-align: middle;">{{ backlog.executor.username }}</td>
                        <td style="vertical-align: middle;">{{ backlog.priority }}</td>
                        <td style="vertical-align: middle;">{{ backlog.status }}&nbsp;
                            <button class="btn btn-light"
                                    onclick="window.location.href='{{ url_for("team.change_backlog", backlog_id=backlog.id) }}'">
                                修改
                            </button>
                            &nbsp
                            <button class="btn btn-light">删除</button>
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <div class="dataTables_paginate paging_simple_numbers" id="bootstrap-data-table_paginate"
                 style="margin-bottom: 10px;">
                <ul class="pagination justify-content-center">

                    {% if tasks.has_prev %}
                        <li class="paginate_button page-item previous"
                            id="bootstrap-data-table_previous">
                            <a class="page-link" href="{{ url_for('lab.task', page=tasks.prev_num) }}"
                               aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="paginate_button page-item previous disabled"
                            id="bootstrap-data-table_previous">
                            <a class="page-link" href="#" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                    {% endif %}
                    {% for page in tasks.iter_pages(1,1,3,1) %}
                        {% if page %}
                            <li class="paginate_button page-item {% if page == tasks.page %}active{% endif %}"
                                id="bootstrap-data-table_previous">
                                <a class="page-link" href="{{ url_for('lab.task', page=page) }}"
                                   aria-label="Previous">
                                    <span aria-hidden="true">{{ page }}</span>
                                </a>
                            </li>
                        {% else %}
                            <li class="paginate_button page-item disabled"
                                id="bootstrap-data-table_previous">
                                <a class="page-link" href="{{ url_for('lab.task', page=page) }}"
                                   aria-label="Previous">
                                    <span aria-hidden="true">&hellip;</span>
                                </a>
                            </li>
                        {% endif %}
                    {% endfor %}
                    {% if tasks.has_next %}
                        <li class="paginate_button page-item next">
                            <a class="page-link" href="{{ url_for('lab.task', page=tasks.next_num) }}"
                               aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="paginate_button page-item next disabled">
                            <a class="page-link" href="#" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    {% endif %}
                </ul>
                <div class="row justify-content-center"
                     style="width: inherit;margin-left: 0;margin-right: 0;margin-bottom: 10px;">
                    <button class="btn btn-light float-right"
                            onclick="window.location.href='{{ url_for("team.create_backlog", project_id=project.id) }}'">
                        新增需求
                    </button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    <script>

    </script>
{% endblock %}