{% extends 'iframe_base.html' %}

{% block content %}
    <div class="container" style="padding-top: 20px;padding-bottom: 20px;">

        <h1>活动管理</h1>
        <br>
        <table class="table">
            <thead>
            <tr>
                <th scope="col">名称</th>
                <th scope="col">时间</th>
                <th scope="col">操作</th>
            </tr>
            </thead>
            <tbody>
            {% for activity in activities.items %}
                <tr>
                    <td style="vertical-align: middle;"><a href="{{ url_for('lab.activity_detail', activity_id=activity.id) }}">{{ activity.activity_name }}</a></td>
                    <td style="vertical-align: middle;">{{ activity.start_time }}</td>
                    {% if current_user.role=='monitor' or current_user.role=='admin' %}
                        <td><button class="btn btn-light">完成</button></td>
                    {% else %}
                        <td><button class="btn btn-light disabled" disabled>完成</button></td>
                    {% endif %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <div class="row justify-content-center" style="width: inherit;margin-left: 0;margin-right: 0;margin-bottom: 10px;">
            <button class="btn btn-light" onclick=window.location.href="{{ url_for('lab.create_activity') }}">新建活动</button>
        </div>
        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                {% if activities.has_prev %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for('lab.activity', page=activities.prev_num) }}" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                {% else %}
                    <li class="page-item disabled">
                        <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                {% endif %}
                {% if activities.has_next %}
                    <li class="page-item">
                        <a class="page-link" href="{{ url_for('lab.activity', page=activities.next_num) }}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% else %}
                    <li class="page-item disabled">
                        <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
    </div>
{% endblock %}